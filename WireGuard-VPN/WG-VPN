#Install Docker:
https://docs.docker.com/engine/install/ubuntu/

sudo apt-get update
 sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release


 curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg


echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null


 sudo apt-get update
 sudo apt-get install docker-ce docker-ce-cli containerd.io


docker run -d \
--name=wireguard \
--cap-add=NET_ADMIN \
--cap-add=SYS_MODULE \
-e PUID=1000 \
-e PGID=1000 \
-e TZ=America/Toronto \
-e PEERS=100docker stop \
-e PEERDNS=auto \
-e INTERNAL_SUBNET=10.13.13.0 \
-e ALLOWEDIPS=0.0.0.0/0 \
-p 51820:51820/udp \
-v /etc/wireguard/config:/config \
-v /lib/modules:/lib/modules \
--sysctl="net.ipv4.conf.all.src_valid_mark=1" \
--restart unless-stopped linuxserver/wireguard


allow all ports on the cloud instance


#To view qr code to connect on mobile:
sudo  docker exec -it wireguard /app/show-peer 3 

#To copy connection info to connect in windows/mac)
cd /etc/wireguard/config/ #cat peer1/peer1.conf   


sudo su 
#cd /etc/wireguard/config/
#cat peer1/peer1.conf   (to copy connection info to connect in windows)
#root@wg-in-01:/etc/wireguard/config# docker exec -it wireguard bash
#root@d40a91e8568b:/# wg show
sudo docker container restart container number
